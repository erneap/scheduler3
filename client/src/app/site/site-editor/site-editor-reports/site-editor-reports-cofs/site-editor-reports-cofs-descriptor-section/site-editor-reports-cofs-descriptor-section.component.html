<div class="flexlayout column topleft" style="margin-left: 10px;">
  <h4>Report Sections Editor</h4>
  <div class="flexlayout row topleft flexgap">
    <div class="flexlayout row topcenter">
      <div class="sectionlist">
        @for (item of sections; track item) {
          <div [class]="setSectionItem(item.id)"
            (click)="onSelectSection(item.id)">
            {{item.label}}
          </div>
        }
      </div>
      <div class="layout-stretch sortdiv">
        @if (showMoveUp) {
          <div class="movement layout-top" (click)="moveSection('up')"
            >
            <mat-icon>arrow_drop_up</mat-icon>
          </div>
        }
        @if (!showMoveUp) {
          <div class="movement layout-top">
          </div>
        }
        @if (this.selected.id > 0) {
          <div class="delete"
            (click)="deleteSection()">
            <mat-icon>delete</mat-icon>
          </div>
        }
        @if (this.selected.id <= 0) {
          <div class="delete">
          </div>
        }
        @if (showMoveDown) {
          <div class="movement layout-bottom" (click)="moveSection('down')"
            >
            <mat-icon>arrow_drop_down</mat-icon>
          </div>
        }
        @if (!showMoveDown) {
          <div class="movement layout-bottom">
          </div>
        }
      </div>
    </div>
    <form [formGroup]="sectionForm" class="flexlayout column topcenter">
      <div class="formrow">
        <div class="formlabel">Section Company</div>
        <div class="forminput">
          <select matNativeControl formControlName="company"
            class="forminput" (change)="updateSection('company')"
            [style]="setInputStyle('company')">
            @for (co of companylist; track co) {
              <option [value]="co.id">
                {{co.name}}
              </option>
            }
          </select>
        </div>
      </div>
      <div class="formrow">
        <div class="formlabel">Section Label</div>
        <div class="forminput">
          <input matNativeControl formControlName="label"
            class="forminput" (blur)="updateSection('label')"
            [style]="setInputStyle('label')">
        </div>
      </div>
      <div class="formrow">
        <div class="formlabel">Signature</div>
        <div class="forminput">
          <input matNativeControl formControlName="signature"
            class="forminput" (blur)="updateSection('signature')"
            [style]="setInputStyle('signature')">
        </div>
      </div>
      <div class="formrow">
        <div class="formlabel">Show Unit in Section</div>
        <div class="forminput" style="background-color: white;">
          <mat-checkbox formControlName="showunit"
            (change)="updateSection('showunit')">
          </mat-checkbox>
        </div>
      </div>
      <div class="formrow formfull">
        Labor Codes to Use in Section
      </div>
      <div class="formrow formfull">
        <div class="laborlist">
          @for (item of laborcodes; track item) {
            <div [class]="setLaborClass(item.id)"
              (click)="updateSectionLaborCode(item.id)">
              {{item.label}}
            </div>
          }
        </div>
      </div>
      @if (this.selected.id <= 0) {
        <div class="formrow formfull">
          <button mat-raised-button color="accent" (click)="addNewSection()">
            Add
          </button>
        </div>
      }
    </form>
  </div>
</div>