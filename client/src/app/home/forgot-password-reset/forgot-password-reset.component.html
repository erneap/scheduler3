<div class="fxLayout flexlayout column center">
  <mat-card style="background-color: #673ab7; color: white;">
    <mat-card-header style="text-align: center;">
      <mat-card-title>
        <div class="mat-headline">Password Recovery (Start)</div>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content class="flexlayout column center">
      <form class="flexlayout column center" [formGroup]="changeForm">
        <div class="flexlayout row center" style="vertical-align: middle;">
          <mat-form-field style="width: 300px;margin-left: 10px;">
            <mat-label>Email Address</mat-label>
            <input matInput formControlName="email">
            @if (changeForm.controls['email'].hasError('required')) {
              <mat-error
              class="error">Email Address Required</mat-error>
            }
          </mat-form-field>
        </div>
        <div class="formFieldWide">
          <mat-form-field style="width: 225px;">
            <mat-label>New Password</mat-label>
            <input matInput type="password" formControlName="password">
            @if (this.changeForm.get('password')?.invalid) {
              <mat-error
                class="error">
                {{getPasswordError()}}
              </mat-error>
            }
          </mat-form-field>
        </div>
        <div class="formFieldWide">
          <mat-form-field style="width: 225px;">
            <mat-label>Verify New Password</mat-label>
            <input matInput type="password" formControlName="password2">
            @if (this.changeForm.get('password2')?.invalid) {
              <mat-error
                class="error">
                {{getVerifyError()}}
              </mat-error>
            }
          </mat-form-field>
        </div>
        <div class="formFieldWide">
          <mat-form-field style="width: 225px;">
            <mat-label>Reset Token</mat-label>
            <input matInput formControlName="token">
            @if (this.changeForm.get('token')?.invalid) {
              <mat-error
              class="error">Token is required</mat-error>
            }
          </mat-form-field>
        </div>
        <div class="flexlayout row center">
          <button mat-raised-button type="submit" color="accent"
            [disabled]="changeForm.invalid"
          (click)="login()">Reset Password</button>
        </div>
        @if (errormsg !== '') {
          <div class="flexlayout row center error"
            style="margin-top: 5px;">
            Error: {{errormsg}}
          </div>
        }
      </form>
    </mat-card-content>
  </mat-card>
</div>
